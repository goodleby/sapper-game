parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"lZ3G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeMatrix=exports.getMatrixClone=exports.getMatrix=exports.matrixApply=exports.linearMatrixDot=exports.matrixMinus=exports.matrixPlus=exports.matrixDot=void 0;var r=function(r,t){var n=[r,t],e=n.map(function(r){return r[0].length});if(!n.every(function(r,t){return r.every(function(r){return r.length===e[t]})}))throw new Error("All rows in a matrix must have equal amount of columns");if(e[0]!==t.length)throw new Error("Amount of columns in the 1st matrix must match amount of rows in the 2nd matrix");return r.map(function(r){return t[0].map(function(n,e){return r.reduce(function(r,n,u){return r+n*t[u][e]},0)})})};exports.matrixDot=r;var t=function(r,t){var n=[r,t],e=r[0].length;if(!n.every(function(r){return r.every(function(r){return r.length===e})})||r.length!==t.length)throw new Error("Matrices must be the same size");return r.map(function(r,n){return r.map(function(r,e){return r+t[n][e]})})};exports.matrixPlus=t;var n=function(r,t){var n=[r,t],e=r[0].length;if(!n.every(function(r){return r.every(function(r){return r.length===e})})||r.length!==t.length)throw new Error("Matrices must be the same size");return r.map(function(r,n){return r.map(function(r,e){return r-t[n][e]})})};exports.matrixMinus=n;var e=function(r,t){var n=[r,t],e=r[0].length;if(!n.every(function(r){return r.every(function(r){return r.length===e})})||r.length!==t.length)throw new Error("Matrices must be the same size");return r.map(function(r,n){return r.map(function(r,e){return r*t[n][e]})})};exports.linearMatrixDot=e;var u=function(r,t){return r.map(function(r){return r.map(function(r){return t(r)})})};exports.matrixApply=u;var o=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return 0};return Array(r).fill(0).map(function(r,e){return Array(t).fill(0).map(function(r,t){return n(t,e)})})};exports.getMatrix=o;var i=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};return r.map(function(r){return Array.isArray(r)?exports.getMatrixClone(r,t):t()})};exports.getMatrixClone=i;var a=function(r){var t=r[0].length;if(!r.every(function(r){return r.length===t}))throw new Error("All rows in a matrix must have equal amount of columns");return Array(t).fill(0).map(function(t,n){return r.map(function(r){return r[n]})})};exports.transposeMatrix=a;
},{}],"Q4Sv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gcd=exports.avg=exports.countDecimals=exports.ceilTo=exports.floorTo=exports.roundTo=exports.getRandBool=exports.getRandNum=void 0;var t=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],e=Math.floor(Math.random()*(r-t+1-o.length)+t);return o.sort(function(t,r){return t-r}).every(function(t){return t<=e&&(e++||!0)}),e};exports.getRandNum=t;var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<t};exports.getRandBool=r;var o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(t*Math.pow(10,r))/Math.pow(10,r)};exports.roundTo=o;var e=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t*Math.pow(10,r))/Math.pow(10,r)};exports.floorTo=e;var n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.ceil(t*Math.pow(10,r))/Math.pow(10,r)};exports.ceilTo=n;var a=function(t){return Math.floor(t)!==t?t.toString().split(".")[1].length:0};exports.countDecimals=a;var u=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.reduce(function(t,r){return t+r})/r.length};exports.avg=u;var i=function(t,r){return 0===r?t:exports.gcd(r,t%r)};exports.gcd=i;
},{}],"DbEB":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cell=void 0;var r=function(){function t(n,r){e(this,t),this.flagged=!1,this.x=n,this.y=r}return n(t,[{key:"toggleFlag",value:function(){this.flagged=!this.flagged}}]),t}();exports.Cell=r;
},{}],"bn5s":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=i();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?u(e):n}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mine=void 0;var l=require("./Cell"),s=function(t){n(c,l.Cell);var r=o(c);function c(t,n){return e(this,c),r.call(this,t,n)}return c}();exports.Mine=s;
},{"./Cell":"DbEB"}],"jQyQ":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=i();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Step=void 0;var l=require("./Cell"),s=function(t){r(c,l.Cell);var n=o(c);function c(t,r,o){var u;return e(this,c),(u=n.call(this,t,r)).mines=o,u}return c}();exports.Step=s;
},{"./Cell":"DbEB"}],"a5eq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Step=exports.Mine=exports.Cell=void 0;var e=require("./Cell");Object.defineProperty(exports,"Cell",{enumerable:!0,get:function(){return e.Cell}});var r=require("./Mine");Object.defineProperty(exports,"Mine",{enumerable:!0,get:function(){return r.Mine}});var t=require("./Step");Object.defineProperty(exports,"Step",{enumerable:!0,get:function(){return t.Step}});
},{"./Cell":"DbEB","./Mine":"bn5s","./Step":"jQyQ"}],"F1KC":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||i(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function n(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function r(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var s=require("../../libs/matrices"),h=require("../../libs/math"),f=require("../cell"),u=function(){function t(e){var i=this;a(this,t),this.fieldSize=10,this.cellSize=30,this.mines=15,this.area=Math.pow(this.fieldSize,2),this.root=document.querySelector(e),this.root.innerHTML="",this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.fieldSize*this.cellSize,this.ctx=this.canvas.getContext("2d"),this.root.append(this.canvas),this.field=s.getMatrix(this.fieldSize,this.fieldSize,function(e,t){return new f.Cell(e,t)}),this.canvas.addEventListener("click",function(e){return i.handleMove(e)}),this.canvas.addEventListener("contextmenu",function(e){return i.handleFlag(e)}),this.createMines(),this.renderField(),this.play()}return c(t,[{key:"play",value:function(){this._play=!0}},{key:"pause",value:function(){this._play=!1}},{key:"lose",value:function(){this.pause(),this.renderMines(),console.log("Sorry, you lost")}},{key:"win",value:function(){this.pause(),this.renderMines(!1),console.log("You won!")}},{key:"getRandCoords",value:function(){var t=this,i=[];this.field.forEach(function(n){var r=n.filter(function(e){var i=e.x,n=e.y;return t.checkMine(i,n)||t.checkStep(i,n)||t.checkFlag(i,n)}).map(function(e){return e.x+e.y*t.fieldSize});i.push.apply(i,e(r))});var n=h.getRandNum(0,this.area-1,i),r=Math.floor(n/this.fieldSize);return{x:n-r*this.fieldSize,y:r}}},{key:"getSurroundingCells",value:function(e,t){for(var i=this.field,n=this.fieldSize,r=[],l=Math.max(t-1,0);l<=Math.min(t+1,n-1);l++)for(var a=Math.max(e-1,0);a<=Math.min(e+1,n-1);a++)a===e&&l===t||r.push(i[l][a]);return r}},{key:"renderField",value:function(){var e=this.fieldSize,t=this.ctx,i=this.cellSize;t.fillStyle="#000";for(var n=0;n<e;n++)for(var r=0;r<e;r++)t.fillRect(n*i+1,r*i+1,i-2,i-2)}},{key:"clearField",value:function(){var e=this.canvas,t=e.width,i=e.height;this.ctx.clearRect(0,0,t,i)}},{key:"renderMines",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this.cellSize,n=this.ctx,r=this.field;n.fillStyle=t?"#f22":"#2f2",r.forEach(function(t){return t.forEach(function(t){var r=t.x,l=t.y;e.checkMine(r,l)&&n.fillRect(r*i+1,l*i+1,i-2,i-2)})})}},{key:"createMines",value:function(){for(var e=0;e<this.mines;e++){var t=this.getRandCoords(),i=t.x,n=t.y;this.field[n][i]=new f.Mine(i,n)}}},{key:"checkMine",value:function(e,t){return this.field[t][e]instanceof f.Mine}},{key:"checkFlag",value:function(e,t){return this.field[t][e].flagged}},{key:"renderStep",value:function(e){var t=e.x,i=e.y,n=this.cellSize,r=this.ctx;r.fillStyle="#aaa",r.fillRect(t*n+1,i*n+1,n-2,n-2),e.mines>0&&(r.fillStyle="#000",r.font="25px Arial",r.fillText(e.mines.toString(),t*n+8,i*n+n-7))}},{key:"step",value:function(e,t){var i=this,n=this.getSurroundingCells(e,t),r=n.filter(function(e){var t=e.x,n=e.y;return i.checkMine(t,n)}).length,l=new f.Step(e,t,r);this.field[t][e]=l,this.renderStep(l),0===r&&n.filter(function(e){var t=e.x,n=e.y;return!i.checkStep(t,n)}).forEach(function(e){var t=e.x,n=e.y;return i.step(t,n)})}},{key:"checkStep",value:function(e,t){return this.field[t][e]instanceof f.Step}},{key:"renderFlag",value:function(e){var t=e.x,i=e.y,n=this.ctx,r=this.cellSize;e.flagged?(n.fillStyle="#ff2",n.fillRect(t*r+1,i*r+1,r-2,r-2)):(n.fillStyle="#000",n.fillRect(t*r+1,i*r+1,r-2,r-2))}},{key:"toggleFlag",value:function(e,t){var i=this.field[t][e];i.toggleFlag(),this.renderFlag(i)}},{key:"checkWin",value:function(){var e=this;return this.field.every(function(t){return t.every(function(t){var i=t.x,n=t.y;return e.checkStep(i,n)||e.checkMine(i,n)})})}},{key:"handleMove",value:function(e){if(this._play){var t=Math.floor(e.offsetX/this.cellSize),i=Math.floor(e.offsetY/this.cellSize);if(!this.checkFlag(t,i))return this.checkMine(t,i)?this.lose():void(this.checkStep(t,i)||(this.step(t,i),this.checkWin()&&this.win()))}}},{key:"handleFlag",value:function(e){if(e.preventDefault(),this._play){var t=Math.floor(e.offsetX/this.cellSize),i=Math.floor(e.offsetY/this.cellSize);this.checkStep(t,i)||this.toggleFlag(t,i)}}}]),t}();exports.Game=u;
},{"../../libs/matrices":"lZ3G","../../libs/math":"Q4Sv","../cell":"a5eq"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./components/game"),r=new e.Game("#root");
},{"./components/game":"F1KC"}]},{},["QCba"], null)
//# sourceMappingURL=src.ff4772a6.js.map